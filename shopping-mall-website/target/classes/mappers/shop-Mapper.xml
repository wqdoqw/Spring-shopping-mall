<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="shopMapper">

	<!-- 상품 목록 -->
	<select id="goodsViewList"
		resultType="com.spring.myapp.domain.GoodsVO">
<![CDATA[
	SELECT goodsCode, 
	 	goodsName, 
	 	secondClassification, 
	 	brand, 
	 	goodsPrice,
     	goodsStock,
     	goodsDescription,
     	goodsImage,
     	goodsThumbnailImage,
     	goodsAddedTime
	FROM goods
        WHERE firstClassification = #{firstClassification}
]]>
	</select>

	<select id="goodsViewOne"
		resultType="com.spring.myapp.domain.GoodsVO">
<![CDATA[
	SELECT goodsCode,
	 	firstClassification, 
	 	secondClassification, 
	 	brand, 
	 	goodsPrice,
     	goodsStock,
     	goodsDescription,
     	goodsImage,
     	goodsThumbnailImage,
     	goodsAddedTime
	FROM goods
	WHERE goodsName = #{goodsName}
]]>
	</select>

	<!-- 상품 소감(댓글) 작성 -->
	<insert id="registerReply">
	<![CDATA[
		INSERT INTO goods_reply (goodsCode,
		goodsName,
		replyNumber,
		userid,
		replyData)
			VALUES (#{goodsCode},
		#{goodsName},
		#{replyNumber},
		#{userid},
		#{replyData})
	]]>
	</insert>
	<!-- 상품 소감(댓글) 리스트 -->
	<select id="replyList"
		resultType="com.spring.myapp.domain.GoodsReplyListVO">
		<![CDATA[
		SELECT r.goodsCode,
		r.goodsName,r.replyNumber,r.userid,r.replyData,
		r.replyDate, m.username
		FROM goods_reply r INNER JOIN member m
		ON m.email = r.userid
		WHERE goodsName = #{goodsName}
		]]>
	</select>
</mapper>
